import{r as p,j as e,J as b,Q as S,t as x}from"./app-qJqT7htH.js";import{B as v}from"./app-sidebar-header-Bxppc5Yz.js";import{I as N}from"./icon-taUgy8Zr.js";import{A as y}from"./app-layout-CACZuReC.js";import{h as w}from"./moment-C5S46NFB.js";import{T,a as C,b as h,c as r,d as P,e as t,f as A}from"./table-uaBUId_x.js";import{B as j}from"./button-C7VxKaqA.js";import{I as B,A as E,a as D}from"./app-pagination-CNMNDmvS.js";import{e as I}from"./mask-lU1_jkkq.js";import{A as M}from"./app-alert-success-C56V9E9Y.js";import{S as Y,a as k,b as R,c as $,e as F}from"./select-BS7AWTYR.js";import{a as H}from"./connectApi-CXU8oq-v.js";import{a as Q}from"./dataSelect-BpWrWvbW.js";import{B as _}from"./badge-DNq-1W3l.js";import{S as z}from"./shopping-cart-BC56FeXV.js";import{C as J}from"./calendar-days-BMrQVjpt.js";import{P as L}from"./plus-BR6Lw4OM.js";import{E as O}from"./eye-CC1Atj8v.js";import"./index-DyZlGOH8.js";import"./index-DUSHhnTm.js";import"./index-DIMeeTr2.js";import"./index-BOReDkxm.js";import"./floating-ui.utils.dom-kEtt1HkL.js";import"./index-DlO2dUyV.js";import"./tslib.es6-M_FJ09fS.js";import"./index-DhbMGU7-.js";import"./app-sidebar-layout-D6dskgAs.js";import"./box-DmGzKpsf.js";import"./user-Cpq-pKNo.js";import"./input-i96YsoWZ.js";import"./chevron-left-TyRhrBxt.js";import"./alert-CvC37Bp-.js";import"./index-DSaL5fmY.js";import"./chevron-down-DB59aUVp.js";import"./check-CGHHgJq9.js";function U({orderid:i,defaultValue:l,title:n,data:c,setMessageStatus:m}){const[s,o]=p.useState(l);p.useEffect(()=>{l!=null&&o(String(l))},[l]);const u=async a=>{o(a),await H.patch(`${a=="4"?"cancelorder":"statusorder"}/${i}`,{status:a}).then(d=>{const{success:f,message:g}=d.data;f&&m(g)}).catch(d=>{console.log(d)})};return e.jsxs(Y,{value:s?String(s):void 0,onValueChange:a=>u(a),children:[e.jsx(k,{className:"w-[180px]",children:e.jsx(R,{placeholder:n})}),e.jsx($,{children:c==null?void 0:c.map((a,d)=>e.jsx(F,{value:String(a.value),children:a==null?void 0:a.label},d))})]})}const V=[{title:"Dashboard",href:route("app.dashboard")},{title:"Pedidos",href:"#"}];function Be({orders:i}){var m;const{flash:l}=b().props,[n,c]=p.useState("");return p.useEffect(()=>{setTimeout(()=>{c("")},3e3)},[n]),e.jsxs(y,{children:[l.message&&e.jsx(M,{message:l.message}),e.jsx(S,{title:"Pedidos"}),e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{iconNode:z,className:"w-8 h-8"}),e.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Pedidos"})]}),e.jsx("div",{children:e.jsx(v,{breadcrumbs:V})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx("div",{className:"w-full",children:e.jsx(B,{placeholder:"Buscar produto por nome/referência",url:"app.orders.index"})}),e.jsxs("div",{className:"w-full flex justify-end gap-4",children:[e.jsx(j,{variant:"secondary",asChild:!0,className:"bg-emerald-500 hover:bg-emerald-500 text-white",children:e.jsx(x,{href:route("app.orders.report"),children:e.jsx(J,{className:"h-4 w-4"})})}),e.jsx(j,{variant:"default",asChild:!0,children:e.jsxs(x,{href:route("app.orders.create"),children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{children:"Pedido"})]})})]})]}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"border rounded-lg",children:e.jsxs(T,{children:[e.jsx(C,{children:e.jsxs(h,{children:[e.jsx(r,{children:"Nº Pedido"}),e.jsx(r,{children:"Cliente"}),e.jsx(r,{children:"Flex"}),e.jsx(r,{children:"Desconto"}),e.jsx(r,{children:"Total"}),e.jsx(r,{children:"Emissão"}),e.jsx(r,{children:n?e.jsx("div",{className:"bg-green-50 text-green-700 border border-green-500 px-2 rounded-md",children:n}):e.jsx("div",{children:"Status"})}),e.jsx(r,{})]})}),e.jsx(P,{children:(i==null?void 0:i.data.length)>0?(m=i==null?void 0:i.data)==null?void 0:m.map(s=>{var o;return e.jsxs(h,{children:[e.jsx(t,{children:s.order_number}),e.jsx(t,{children:(o=s==null?void 0:s.customer)==null?void 0:o.name}),e.jsx(t,{children:s.flex}),e.jsx(t,{children:s.discount}),e.jsxs(t,{children:["R$ ",I(s.total)]}),e.jsx(t,{children:w(s.created_at).format("DD/MM/YYYY")}),e.jsx(t,{children:s.status=="4"?e.jsx(_,{variant:"destructive",children:"Pedido cancelado"}):e.jsx(U,{setMessageStatus:c,orderid:s==null?void 0:s.id,data:Q,title:"Selecione o status",defaultValue:s==null?void 0:s.status})}),e.jsxs(t,{className:"flex justify-end gap-2",children:[e.jsx(j,{asChild:!0,size:"icon",className:"bg-cyan-500 hover:bg-cyan-600 text-white",children:e.jsx(x,{href:route("app.orders.edit",s.id),children:e.jsx(O,{})})}),e.jsx(E,{title:"este cliente",url:"app.orders.destroy",param:s.id})]})]},s.id)}):e.jsx(h,{children:e.jsx(t,{colSpan:7,className:"h-16 w-full flex items-center justify-center",children:"Não há dados a serem mostrados no momento."})})}),e.jsx(A,{children:e.jsx(h,{children:e.jsx(t,{colSpan:9,children:e.jsx(D,{data:i})})})})]})})})]})}export{Be as default};
