import{r as h,j as e,J as b,Q as S,t as x}from"./app-DRZtJDGn.js";import{B as v}from"./app-sidebar-header-G06ktcLv.js";import{I as N}from"./icon-hY9TPVPS.js";import{A as y}from"./app-layout-BX2EClQY.js";import{h as w}from"./moment-C5S46NFB.js";import{T,a as C,b as p,c as l,d as P,e as a,f as A}from"./table-CoiQjdU6.js";import{B as j}from"./button-BnkP-fmG.js";import{I as B,A as E,a as D}from"./app-pagination-D_uJnzCO.js";import{e as I}from"./mask-lU1_jkkq.js";import{A as M}from"./app-alert-success-pQ42MQ8b.js";import{S as Y,a as k,b as R,c as $,e as F}from"./select-B44SwB3i.js";import{a as H}from"./connectApi-r1_hspqg.js";import{a as Q}from"./dataSelect-BpWrWvbW.js";import{B as _}from"./badge-Dc1UTdNW.js";import{S as z}from"./shopping-cart-BOxlmynj.js";import{C as J}from"./calendar-days-altHPJRa.js";import{P as L}from"./plus-Br7VasMK.js";import{E as O}from"./eye-CXQkKiev.js";import"./utils-CvvssGgm.js";import"./index-CXTonh5l.js";import"./index-Bh-BeGiq.js";import"./index-amW5ZxYA.js";import"./index-o776qNnf.js";import"./floating-ui.utils.dom-kEtt1HkL.js";import"./index-BTF-64v2.js";import"./tslib.es6-M_FJ09fS.js";import"./index-C122pwpy.js";import"./x-Bz_t5JH7.js";import"./app-sidebar-layout-CDTHGKi2.js";import"./box-Ba4oYj4P.js";import"./users-Dr6RhfQy.js";import"./user-t--zhyol.js";import"./input-J4PXv_xR.js";import"./chevron-left-DgQdIj46.js";import"./alert-C-4OYnpr.js";import"./index-Dp788XVE.js";import"./chevron-down-Dkxy2UMM.js";import"./check-D7UpGRmi.js";function U({orderid:i,defaultValue:r,title:n,data:c,setMessageStatus:m}){const[s,o]=h.useState(r);h.useEffect(()=>{r!=null&&o(String(r))},[r]);const u=async t=>{o(t),await H.patch(`${t=="4"?"cancelorder":"statusorder"}/${i}`,{status:t}).then(d=>{const{success:f,message:g}=d.data;f&&m(g)}).catch(d=>{console.log(d)})};return e.jsxs(Y,{value:s?String(s):void 0,onValueChange:t=>u(t),children:[e.jsx(k,{className:"w-[180px]",children:e.jsx(R,{placeholder:n})}),e.jsx($,{children:c==null?void 0:c.map((t,d)=>e.jsx(F,{value:String(t.value),children:t==null?void 0:t.label},d))})]})}const V=[{title:"Dashboard",href:route("app.dashboard")},{title:"Pedidos",href:"#"}];function Ie({orders:i}){var m;const{flash:r}=b().props,[n,c]=h.useState("");return h.useEffect(()=>{setTimeout(()=>{c("")},3e3)},[n]),e.jsxs(y,{children:[r.message&&e.jsx(M,{message:r.message}),e.jsx(S,{title:"Pedidos"}),e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{iconNode:z,className:"w-8 h-8"}),e.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Pedidos"})]}),e.jsx("div",{children:e.jsx(v,{breadcrumbs:V})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx("div",{className:"w-full",children:e.jsx(B,{placeholder:"Buscar produto por nome/referência",url:"app.orders.index"})}),e.jsxs("div",{className:"w-full flex justify-end gap-4",children:[e.jsx(j,{variant:"secondary",asChild:!0,className:"bg-emerald-500 hover:bg-emerald-500 text-white",children:e.jsx(x,{href:route("app.orders.report"),children:e.jsx(J,{className:"h-4 w-4"})})}),e.jsx(j,{variant:"default",asChild:!0,children:e.jsxs(x,{href:route("app.orders.create"),children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{children:"Pedido"})]})})]})]}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"border rounded-lg",children:e.jsxs(T,{children:[e.jsx(C,{children:e.jsxs(p,{children:[e.jsx(l,{children:"Nº Pedido"}),e.jsx(l,{children:"Cliente"}),e.jsx(l,{children:"Flex"}),e.jsx(l,{children:"Desconto"}),e.jsx(l,{children:"Total"}),e.jsx(l,{children:"Emissão"}),e.jsx(l,{children:n?e.jsx("div",{className:"bg-green-50 text-green-700 border border-green-500 px-2 rounded-md",children:n}):e.jsx("div",{children:"Status"})}),e.jsx(l,{})]})}),e.jsx(P,{children:(i==null?void 0:i.data.length)>0?(m=i==null?void 0:i.data)==null?void 0:m.map(s=>{var o;return e.jsxs(p,{children:[e.jsx(a,{children:s.order_number}),e.jsx(a,{children:(o=s==null?void 0:s.customer)==null?void 0:o.name}),e.jsx(a,{children:s.flex}),e.jsx(a,{children:s.discount}),e.jsxs(a,{children:["R$ ",I(s.total)]}),e.jsx(a,{children:w(s.created_at).format("DD/MM/YYYY")}),e.jsx(a,{children:s.status=="4"?e.jsx(_,{variant:"destructive",children:"Pedido cancelado"}):e.jsx(U,{setMessageStatus:c,orderid:s==null?void 0:s.id,data:Q,title:"Selecione o status",defaultValue:s==null?void 0:s.status})}),e.jsxs(a,{className:"flex justify-end gap-2",children:[e.jsx(j,{asChild:!0,size:"icon",className:"bg-cyan-500 hover:bg-cyan-600 text-white",children:e.jsx(x,{href:route("app.orders.edit",s.id),children:e.jsx(O,{})})}),e.jsx(E,{title:"este cliente",url:"app.orders.destroy",param:s.id})]})]},s.id)}):e.jsx(p,{children:e.jsx(a,{colSpan:7,className:"h-16 w-full flex items-center justify-center",children:"Não há dados a serem mostrados no momento."})})}),e.jsx(A,{children:e.jsx(p,{children:e.jsx(a,{colSpan:9,children:e.jsx(D,{data:i})})})})]})})})]})}export{Ie as default};
