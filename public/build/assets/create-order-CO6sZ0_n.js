import{j as e,J as I,r as f,x as P,Q as _,t as k}from"./app-Dtj8ss-h.js";import{B as F}from"./app-sidebar-header-CsYcAD-l.js";import{I as B}from"./icon-Dm1xW-2f.js";import{c as D,B as h}from"./button-Bl2IGndM.js";import{A as L}from"./app-layout-CLF5Awv2.js";import{ProductSelector as E}from"./ProductSelector-CVzqAUPW.js";import{OrderSummary as R}from"./OrderSummary-CGAdZ8EQ.js";import{S as z}from"./react-select.esm-CGCCyVJt.js";import{C as j,a as M}from"./card-DmToo-6U.js";import{I as $}from"./input-error-Codl3hVh.js";import{L as m}from"./label-KM3N2EPf.js";import{I as g}from"./input-BOc7YpBQ.js";import{B as q}from"./badge-BN5D1ant.js";import{f as Q,e as p}from"./mask-lU1_jkkq.js";import{A as U,a as J}from"./alert-D3pJZP_e.js";import{S as O}from"./shopping-cart-HyqoY-8u.js";import{A as T}from"./arrow-left-BjsapAWI.js";import{U as V}from"./user-ylLZYB4h.js";import"./index-BX-KMqv4.js";import"./index-Daj0l9pH.js";import"./index-CPmN0p8I.js";import"./index-ZbCBRapc.js";import"./floating-ui.utils.dom-kEtt1HkL.js";import"./index-C9uB5iCs.js";import"./tslib.es6-M_FJ09fS.js";import"./index-DuzT2XL6.js";import"./app-sidebar-layout-Bgwc7V5P.js";import"./box-CRvSa9O6.js";import"./table-D8cNwqVF.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],H=D("CircleAlert",G);function K({message:d,className:c}){return e.jsx("div",{className:`p-4 ${c}`,children:e.jsxs(U,{className:"border-red-200 bg-red-50 text-red-600 relative",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx(J,{className:"flex items-center justify-between",children:e.jsx("span",{className:"text-red-800",children:d})})]})})}const W=[{title:"Dashboard",href:route("app.dashboard")},{title:"Pedidos",href:route("app.products.index")},{title:"Adicionar",href:"#"}];function Ie({customers:d,products:c,flex:n}){const{flash:x}=I().props,b=d.map(s=>({value:s.id,label:s.name})),[l,u]=f.useState([]),{data:i,setData:t,post:y,processing:v,errors:N}=P({customer_id:"",flex:"",discount:"",total:"",items:[]});f.useEffect(()=>{t("items",l),t(s=>({...s,flex:Q(s==null?void 0:s.flex)})),t("total",l.reduce((s,r)=>s+r.quantity*r.price,0).toFixed(2))},[l,i==null?void 0:i.flex]);const C=async s=>{s.preventDefault(),y(route("app.orders.store"))},S=(s,r)=>{u(a=>a.find(o=>o.product_id===s.id)?a.map(o=>o.product_id===s.id?{...o,quantity:o.quantity+r}:o):[...a,{product_id:s.id,quantity:r,price:s.price,name:s.name,total:(parseFloat(s.price)*r).toFixed(2)}])},A=s=>{u(r=>r.filter(a=>a.product_id!==s))},w=s=>{t("customer_id",s==null?void 0:s.value)};return e.jsxs(L,{children:[e.jsx(_,{title:"Pedidos"}),x.error&&e.jsx(K,{message:x.error}),e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{iconNode:O,className:"w-8 h-8"}),e.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Pedidos"})]}),e.jsx("div",{children:e.jsx(F,{breadcrumbs:W})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx("div",{children:e.jsx(h,{variant:"default",asChild:!0,children:e.jsxs(k,{href:route("app.orders.index"),children:[e.jsx(T,{"h-4":!0,"w-4":!0}),e.jsx("span",{children:"Voltar"})]})})}),e.jsx("div",{})]}),e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:C,children:[e.jsxs(j,{className:"mb-4 p-2",children:[e.jsxs(M,{className:"flex items-center gap-2 font-bold mb-2",children:[e.jsx(V,{className:"w-6 h-6"})," Cliente"]}),e.jsx(z,{options:b,onChange:w,placeholder:"Selecione o cliente",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:{control:(s,r)=>({...s,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:s=>({...s}),menuList:s=>({...s,fontSize:"14px"})}}),e.jsx($,{className:"mt-2",message:N.customer_id})]}),e.jsx(E,{products:c,onAddProduct:S}),e.jsx(R,{items:l,onRemoveItem:A}),e.jsx(j,{className:"mb-4 p-2",children:e.jsxs("div",{className:"flex items-center justify-start gap-6",children:[e.jsxs("div",{className:"gap-1 flex flex-col items-center justify-center",children:[e.jsx(m,{children:"Flex diponÃ­vel"}),e.jsxs(q,{variant:"default",className:"text-lg top-4",children:["R$ ",p(n?n==null?void 0:n.value:"0.00")]})]}),e.jsxs("div",{className:"gap-2",children:[e.jsx(m,{htmlFor:"flex",children:"Flex"}),e.jsx(g,{type:"text",id:"flex",value:p(i.flex),onChange:s=>t("flex",s.target.value)})]}),e.jsxs("div",{className:"gap-2",children:[e.jsx(m,{htmlFor:"discount",children:"Desconto"}),e.jsx(g,{type:"text",id:"discount",value:p(i.discount),onChange:s=>t("discount",s.target.value)})]})]})}),e.jsx("div",{className:"mt-6",children:e.jsx(h,{variant:"secondary",type:"submit",className:"bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700 disabled:bg-gray-400",disabled:v,children:"Finalizar Pedido"})})]})})]})}export{Ie as default};
