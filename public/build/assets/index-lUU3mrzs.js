import{r as h,j as e,J as b,Q as S,t as p}from"./app-CR3eLBj1.js";import{B as v}from"./app-sidebar-header-kqxOd9gO.js";import{I as N}from"./icon-DzMIdqc5.js";import{A as y}from"./app-layout-BSshuS44.js";import{h as T}from"./moment-C5S46NFB.js";import{T as w,a as P,b as x,c,d as A,e as a,f as B}from"./table-C9F712up.js";import{B as j}from"./button-B24Zs7v5.js";import{I as C,A as E,a as D}from"./app-pagination-DqgCgDV2.js";import{e as I}from"./mask-lU1_jkkq.js";import{A as M}from"./app-alert-success-Bm8dLPfO.js";import{S as Y,a as k,b as R,c as $,e as F}from"./select-PmAE8WQ8.js";import{a as H}from"./connectApi-CAq128_C.js";import{a as Q}from"./dataSelect-BpWrWvbW.js";import{B as _}from"./badge-4i3nNebF.js";import{S as z}from"./shopping-cart-1wdYtZs2.js";import{P as J}from"./plus-Bf9Fk2a6.js";import{E as L}from"./eye-CtKQNeXj.js";import"./index-BKFclUgu.js";import"./index-3PA7WflP.js";import"./index-Cl_G2Ve8.js";import"./index-OQNNVa3d.js";import"./floating-ui.utils.dom-kEtt1HkL.js";import"./index-BQXxF95v.js";import"./index-CDlc-Urf.js";import"./app-sidebar-layout-CYffyFM9.js";import"./box-BdAADrnp.js";import"./user-2MyGpyAy.js";import"./input-D2MqHLND.js";import"./alert-C2desChF.js";import"./index-DRXL1Abb.js";import"./check-CE7U0D3k.js";function O({orderid:i,defaultValue:l,title:n,data:r,setMessageStatus:m}){const[s,o]=h.useState(l);h.useEffect(()=>{l!=null&&o(String(l))},[l]);const u=async t=>{o(t),await H.patch(`${t=="4"?"cancelorder":"statusorder"}/${i}`,{status:t}).then(d=>{const{success:f,message:g}=d.data;f&&m(g)}).catch(d=>{console.log(d)})};return e.jsxs(Y,{value:s?String(s):void 0,onValueChange:t=>u(t),children:[e.jsx(k,{className:"w-[180px]",children:e.jsx(R,{placeholder:n})}),e.jsx($,{children:r==null?void 0:r.map((t,d)=>e.jsx(F,{value:String(t.value),children:t==null?void 0:t.label},d))})]})}const U=[{title:"Dashboard",href:route("app.dashboard")},{title:"Pedidos",href:"#"}];function Te({orders:i}){var m;const{flash:l}=b().props,[n,r]=h.useState("");return h.useEffect(()=>{setTimeout(()=>{r("")},3e3)},[n]),e.jsxs(y,{children:[l.message&&e.jsx(M,{message:l.message}),e.jsx(S,{title:"Pedidos"}),e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{iconNode:z,className:"w-8 h-8"}),e.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Pedidos"})]}),e.jsx("div",{children:e.jsx(v,{breadcrumbs:U})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx("div",{className:"w-full",children:e.jsx(C,{placeholder:"Buscar produto por nome/referência",url:"app.orders.index"})}),e.jsx("div",{className:"w-full flex justify-end",children:e.jsx(j,{variant:"default",asChild:!0,children:e.jsxs(p,{href:route("app.orders.create"),children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{children:"Pedido"})]})})})]}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"border rounded-lg",children:e.jsxs(w,{children:[e.jsx(P,{children:e.jsxs(x,{children:[e.jsx(c,{children:"Nº Pedido"}),e.jsx(c,{children:"Cliente"}),e.jsx(c,{children:"Flex"}),e.jsx(c,{children:"Desconto"}),e.jsx(c,{children:"Total"}),e.jsx(c,{children:"Emissão"}),e.jsx(c,{children:n?e.jsx("div",{className:"bg-green-50 text-green-700 border border-green-500 px-2 rounded-md",children:n}):e.jsx("div",{children:"Status"})}),e.jsx(c,{})]})}),e.jsx(A,{children:(i==null?void 0:i.data.length)>0?(m=i==null?void 0:i.data)==null?void 0:m.map(s=>{var o;return e.jsxs(x,{children:[e.jsx(a,{children:s.order_number}),e.jsx(a,{children:(o=s==null?void 0:s.customer)==null?void 0:o.name}),e.jsx(a,{children:s.flex}),e.jsx(a,{children:s.discount}),e.jsxs(a,{children:["R$ ",I(s.total)]}),e.jsx(a,{children:T(s.created_at).format("DD/MM/YYYY")}),e.jsx(a,{children:s.status=="4"?e.jsx(_,{variant:"destructive",children:"Pedido cancelado"}):e.jsx(O,{setMessageStatus:r,orderid:s==null?void 0:s.id,data:Q,title:"Selecione o status",defaultValue:s==null?void 0:s.status})}),e.jsxs(a,{className:"flex justify-end gap-2",children:[e.jsx(j,{asChild:!0,size:"icon",className:"bg-cyan-500 hover:bg-cyan-600 text-white",children:e.jsx(p,{href:route("app.orders.edit",s.id),children:e.jsx(L,{})})}),e.jsx(E,{title:"este cliente",url:"app.orders.destroy",param:s.id})]})]},s.id)}):e.jsx(x,{children:e.jsx(a,{colSpan:7,className:"h-16 w-full flex items-center justify-center",children:"Não há dados a serem mostrados no momento."})})}),e.jsx(B,{children:e.jsx(x,{children:e.jsx(a,{colSpan:9,children:e.jsx(D,{data:i})})})})]})})})]})}export{Te as default};
