import{J as B,x as E,j as s,Q as L,t as I}from"./app-Ca2cAlVW.js";import{B as k}from"./app-sidebar-header-52yH3l2X.js";import{I as _}from"./icon-UXLxuJn1.js";import{B as g}from"./button-D2kzG-Az.js";import{I as d}from"./input-CfN8fHI5.js";import{L as i}from"./label-DisO_zHl.js";import{T as A}from"./textarea-C8OYHGSr.js";import{m as P,a as T,b as D,u as V}from"./mask-lU1_jkkq.js";import{A as J}from"./admin-sidebar-layout-BJsMBSQj.js";import{I as u}from"./input-error-Bl8TKvVR.js";import{S as j}from"./react-select.esm-3a71lzwM.js";import{s as n}from"./dataSelect-BpWrWvbW.js";import{A as M}from"./app-alert-success-CAJtENzw.js";import{B as Q}from"./building-DRpTDIiD.js";import{A as R}from"./arrow-left-Yo7oCsz1.js";import{S as $}from"./save-CuJeFyVA.js";import"./index-Ca8ju3Jx.js";import"./index-uXMSrDd3.js";import"./index-D8N1DkUn.js";import"./index-CeYymKz2.js";import"./floating-ui.utils.dom-kEtt1HkL.js";import"./index-1hydXANl.js";import"./index-DMOZ-qCi.js";import"./user-cog-C1tjNm4M.js";import"./alert-DqdwczIP.js";const O=[{title:"Dashboard",href:route("admin.dashboard")},{title:"Empresas",href:route("admin.tenants.index")},{title:"Editar",href:"#"}];function js({plans:v,tenant:a}){var x;const{flash:h}=B().props,p=v.map(e=>({value:e.id,label:e.name})),{data:o,setData:r,patch:f,processing:b,reset:y,errors:l}=E({company:a==null?void 0:a.company,cnpj:a==null?void 0:a.cnpj,phone:a==null?void 0:a.phone,whatsapp:a==null?void 0:a.whatsapp,email:a==null?void 0:a.email,zip_code:a==null?void 0:a.zip_code,state:a==null?void 0:a.state,city:a==null?void 0:a.city,district:a==null?void 0:a.district,street:a==null?void 0:a.street,complement:a==null?void 0:a.complement,number:a==null?void 0:a.number,plan:a==null?void 0:a.plan,status:a==null?void 0:a.status,payment:a==null?void 0:a.payment,observations:a==null?void 0:a.observations}),N=async e=>{e.preventDefault(),f(route("admin.tenants.update",a.id),{onSuccess:()=>y()})},C=e=>{const t=V(e);fetch(`https://viacep.com.br/ws/${t}/json/`).then(m=>m.json()).then(m=>{r(c=>({...c,state:m.uf})),r(c=>({...c,city:m.localidade})),r(c=>({...c,district:m.bairro})),r(c=>({...c,street:m.logradouro})),r(c=>({...c,complement:m.complemento}))}).catch(m=>console.error(m))},S=e=>{r("plan",e==null?void 0:e.value)},w=e=>{r("status",e==null?void 0:e.value)},F=p==null?void 0:p.filter(e=>e.value==(a==null?void 0:a.plan)).map(e=>({value:e.value,label:e.label})),z=(x=n)==null?void 0:x.filter(e=>e.value==(a==null?void 0:a.status)).map(e=>({value:e.value,label:e.label}));return s.jsxs(J,{children:[h.message&&s.jsx(M,{message:h.message}),s.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[s.jsx(L,{title:"Empresas"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_,{iconNode:Q,className:"w-8 h-8"}),s.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Empresas"})]}),s.jsx("div",{children:s.jsx(k,{breadcrumbs:O})})]}),s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsx("div",{children:s.jsx(g,{variant:"default",asChild:!0,children:s.jsxs(I,{href:route("admin.tenants.index"),children:[s.jsx(R,{"h-4":!0,"w-4":!0}),s.jsx("span",{children:"Voltar"})]})})}),s.jsx("div",{})]}),s.jsx("div",{className:"p-4",children:s.jsx("div",{className:"border rounded-lg p-2",children:s.jsxs("form",{onSubmit:N,className:"space-y-8",children:[s.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mt-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(i,{htmlFor:"company",children:"Razão social"}),s.jsx(d,{type:"text",id:"company",value:o.company,onChange:e=>r("company",e.target.value)}),l.company&&s.jsx("div",{className:"text-red-500 text-sm",children:l.company})]}),s.jsxs("div",{className:"col-span-2 grid gap-2",children:[s.jsx(i,{htmlFor:"cnpj",children:"CPF/CNPJ"}),s.jsx(d,{type:"text",id:"cnpj",value:P(o.cnpj),onChange:e=>r("cnpj",e.target.value),maxLength:18}),l.cnpj&&s.jsx("div",{className:"text-red-500 text-sm",children:l.cnpj})]})]}),s.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mt-4",children:[s.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[s.jsx(i,{htmlFor:"email",children:"E-mail"}),s.jsx(d,{type:"text",id:"email",value:o.email,onChange:e=>r("email",e.target.value)}),l.email&&s.jsx("div",{className:"text-red-500 text-sm",children:l.email})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(i,{htmlFor:"phone",children:"Telefone"}),s.jsx(d,{type:"text",id:"phone",value:T(o.phone),onChange:e=>r("phone",e.target.value),maxLength:15}),l.phone&&s.jsx("div",{className:"text-red-500 text-sm",children:l.phone})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(i,{htmlFor:"whatsapp",children:"Whatsapp"}),s.jsx(d,{type:"text",id:"whatsapp",value:o.whatsapp,onChange:e=>r("whatsapp",e.target.value),maxLength:13})]})]}),s.jsxs("div",{className:"grid md:grid-cols-6 gap-4 mt-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(i,{htmlFor:"zip_code",children:"CEP"}),s.jsx(d,{type:"text",id:"zip_code",value:D(o.zip_code),onChange:e=>r("zip_code",e.target.value),onBlur:e=>C(e.target.value),maxLength:9})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(i,{htmlFor:"state",children:"UF"}),s.jsx(d,{type:"text",id:"state",value:o.state,onChange:e=>r("state",e.target.value)}),l.state&&s.jsx("div",{children:l.state})]}),s.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[s.jsx(i,{htmlFor:"city",children:"Cidade"}),s.jsx(d,{type:"text",id:"city",value:o.city,onChange:e=>r("city",e.target.value)})]}),s.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[s.jsx(i,{htmlFor:"district",children:"Bairro"}),s.jsx(d,{type:"text",id:"district",value:o.district,onChange:e=>r("district",e.target.value)})]})]}),s.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mt-4",children:[s.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[s.jsx(i,{htmlFor:"street",children:"Endereço"}),s.jsx(d,{type:"text",id:"street",value:o.street,onChange:e=>r("street",e.target.value)})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(i,{htmlFor:"complement",children:"Complemento"}),s.jsx(d,{type:"text",id:"complement",value:o.complement,onChange:e=>r("complement",e.target.value)})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(i,{htmlFor:"number",children:"Número"}),s.jsx(d,{type:"text",id:"number",value:o.number,onChange:e=>r("number",e.target.value)})]})]}),s.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mt-4",children:[s.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[s.jsx(i,{htmlFor:"plan_id",children:"Plano"}),s.jsx(j,{defaultValue:F,options:p,onChange:S,placeholder:"Selecione o plano",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:{control:(e,t)=>({...e,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:e=>({...e}),menuList:e=>({...e,fontSize:"14px"})}}),s.jsx(u,{className:"mt-2",message:l.plan})]}),s.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[s.jsx(i,{htmlFor:"status",children:"Status"}),s.jsx(j,{defaultValue:z,options:n,onChange:w,placeholder:"Selecione o status",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:{control:(e,t)=>({...e,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:e=>({...e}),menuList:e=>({...e,fontSize:"14px"})}}),s.jsx(u,{className:"mt-2",message:l.status})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(i,{htmlFor:"observations",children:"Observações"}),s.jsx(A,{id:"observations",value:o.observations,onChange:e=>r("observations",e.target.value)})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(g,{type:"submit",disabled:b,children:[s.jsx($,{}),"Salvar"]})})]})})})]})}export{js as default};
