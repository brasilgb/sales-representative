import{j as e,J as I,r as f,x as P,Q as _,t as k}from"./app-DRZtJDGn.js";import{B as F}from"./app-sidebar-header-G06ktcLv.js";import{I as B}from"./icon-hY9TPVPS.js";import{B as h}from"./button-BnkP-fmG.js";import{A as D}from"./app-layout-BX2EClQY.js";import{ProductSelector as L}from"./ProductSelector-CPBaJx54.js";import{OrderSummary as E}from"./OrderSummary-B6YWoJHq.js";import{S as R}from"./react-select.esm-w2MfAUTA.js";import{C as j,a as z}from"./card-D7YFxP5j.js";import{I as M}from"./input-error-BJonmUYR.js";import{L as m}from"./label-BVDXvGME.js";import{I as g}from"./input-J4PXv_xR.js";import{B as $}from"./badge-Dc1UTdNW.js";import{f as q,e as p}from"./mask-lU1_jkkq.js";import{A as Q,a as U}from"./alert-C-4OYnpr.js";import{c as J}from"./utils-CvvssGgm.js";import{S as O}from"./shopping-cart-BOxlmynj.js";import{A as T}from"./arrow-left-DwQ-pZm6.js";import{U as V}from"./user-t--zhyol.js";import"./index-CXTonh5l.js";import"./index-Bh-BeGiq.js";import"./index-amW5ZxYA.js";import"./index-o776qNnf.js";import"./floating-ui.utils.dom-kEtt1HkL.js";import"./index-BTF-64v2.js";import"./tslib.es6-M_FJ09fS.js";import"./index-C122pwpy.js";import"./x-Bz_t5JH7.js";import"./app-sidebar-layout-CDTHGKi2.js";import"./box-Ba4oYj4P.js";import"./users-Dr6RhfQy.js";import"./table-CoiQjdU6.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],H=J("CircleAlert",G);function K({message:d,className:c}){return e.jsx("div",{className:`p-4 ${c}`,children:e.jsxs(Q,{className:"border-red-200 bg-red-50 text-red-600 relative",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx(U,{className:"flex items-center justify-between",children:e.jsx("span",{className:"text-red-800",children:d})})]})})}const W=[{title:"Dashboard",href:route("app.dashboard")},{title:"Pedidos",href:route("app.products.index")},{title:"Adicionar",href:"#"}];function ke({customers:d,products:c,flex:n}){const{flash:x}=I().props,b=d.map(r=>({value:r.id,label:r.name})),[l,u]=f.useState([]),{data:i,setData:t,post:y,processing:v,errors:N}=P({customer_id:"",flex:"",discount:"",total:"",items:[]});f.useEffect(()=>{t("items",l),t(r=>({...r,flex:q(r==null?void 0:r.flex)})),t("total",l.reduce((r,s)=>r+s.quantity*s.price,0).toFixed(2))},[l,i==null?void 0:i.flex]);const C=async r=>{r.preventDefault(),y(route("app.orders.store"))},S=(r,s)=>{u(a=>a.find(o=>o.product_id===r.id)?a.map(o=>o.product_id===r.id?{...o,quantity:o.quantity+s}:o):[...a,{product_id:r.id,quantity:s,price:r.price,name:r.name,total:(parseFloat(r.price)*s).toFixed(2)}])},A=r=>{u(s=>s.filter(a=>a.product_id!==r))},w=r=>{t("customer_id",r==null?void 0:r.value)};return e.jsxs(D,{children:[e.jsx(_,{title:"Pedidos"}),x.error&&e.jsx(K,{message:x.error}),e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{iconNode:O,className:"w-8 h-8"}),e.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Pedidos"})]}),e.jsx("div",{children:e.jsx(F,{breadcrumbs:W})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx("div",{children:e.jsx(h,{variant:"default",asChild:!0,children:e.jsxs(k,{href:route("app.orders.index"),children:[e.jsx(T,{"h-4":!0,"w-4":!0}),e.jsx("span",{children:"Voltar"})]})})}),e.jsx("div",{})]}),e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:C,children:[e.jsxs(j,{className:"mb-4 p-2",children:[e.jsxs(z,{className:"flex items-center gap-2 font-bold mb-2",children:[e.jsx(V,{className:"w-6 h-6"})," Cliente"]}),e.jsx(R,{options:b,onChange:w,placeholder:"Selecione o cliente",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:{control:(r,s)=>({...r,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:r=>({...r}),menuList:r=>({...r,fontSize:"14px"})}}),e.jsx(M,{className:"mt-2",message:N.customer_id})]}),e.jsx(L,{products:c,onAddProduct:S}),e.jsx(E,{items:l,onRemoveItem:A}),e.jsx(j,{className:"mb-4 p-2",children:e.jsxs("div",{className:"flex items-center justify-start gap-6",children:[e.jsxs("div",{className:"gap-1 flex flex-col items-center justify-center",children:[e.jsx(m,{children:"Flex diponÃ­vel"}),e.jsxs($,{variant:"default",className:"text-lg top-4",children:["R$ ",p(n?n==null?void 0:n.value:"0.00")]})]}),e.jsxs("div",{className:"gap-2",children:[e.jsx(m,{htmlFor:"flex",children:"Flex"}),e.jsx(g,{type:"text",id:"flex",value:p(i.flex),onChange:r=>t("flex",r.target.value)})]}),e.jsxs("div",{className:"gap-2",children:[e.jsx(m,{htmlFor:"discount",children:"Desconto"}),e.jsx(g,{type:"text",id:"discount",value:p(i.discount),onChange:r=>t("discount",r.target.value)})]})]})}),e.jsx("div",{className:"mt-6",children:e.jsx(h,{variant:"secondary",type:"submit",className:"bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700 disabled:bg-gray-400",disabled:v,children:"Finalizar Pedido"})})]})})]})}export{ke as default};
