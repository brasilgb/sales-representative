import{r as u,x as b,j as e,Q as N,t as q}from"./app-zxAKGHWw.js";import{B as C}from"./app-sidebar-header-Dgua840s.js";import{I as F}from"./icon-21wlYR8G.js";import{B as p}from"./button-DGKMqNEc.js";import{A as S}from"./app-layout-lix4UnWU.js";import{I as o}from"./input-CG7s8xGe.js";import{L as d}from"./label-us6Q51VU.js";import{T as _}from"./textarea-BmjrWC7z.js";import{f as B,e as D}from"./mask-lU1_jkkq.js";import{S as O}from"./switch-Dj6nBX_T.js";import{b as w}from"./connectApi-BUjdbiGG.js";import{B as P}from"./box-DvGOHUj5.js";import{A as I}from"./arrow-left-BhjLt4DY.js";import{S as k}from"./save-D-a_c_Rj.js";import"./utils-t8BOAHCg.js";import"./index-CbOV9FaR.js";import"./index-DN6QEIaX.js";import"./index-p0fQrMIl.js";import"./index-JSHqziUT.js";import"./floating-ui.utils.dom-kEtt1HkL.js";import"./index-DGuVfGQM.js";import"./tslib.es6-M_FJ09fS.js";import"./index-CSe1dh4V.js";import"./app-sidebar-layout-BosYDWVP.js";import"./shopping-cart-BnoImBnG.js";import"./users-BjXfm3zq.js";import"./user-BndIf9zg.js";import"./index-CnKzplLa.js";const A=[{title:"Dashboard",href:route("app.dashboard")},{title:"Produtos",href:route("app.products.index")},{title:"Adicionar",href:"#"}];function ce(){const[l,m]=u.useState(!1),{data:i,setData:r,post:x,processing:h,reset:j,errors:a}=b({name:"",reference:"",description:"",unity:"",measure:"",price:"",quantity:"",min_quantity:"",enabled:!1,observations:""}),v=async t=>{t.preventDefault(),x(route("app.products.store"),{onSuccess:()=>j()})};u.useEffect(()=>{r(t=>({...t,price:B(t==null?void 0:t.price)}))},[i.price]);const g=async t=>{t.preventDefault();let y=t.target.value;try{const c=await w.get(`/getproducts/${y}`);console.log(c);const{success:f,product:n}=c.data;f&&n?(m(!0),r(s=>({...s,name:n.name})),r(s=>({...s,product:n.product})),r(s=>({...s,description:n.description})),r(s=>({...s,unity:n.unity})),r(s=>({...s,measure:n.measure})),r(s=>({...s,price:n.price})),r(s=>({...s,quantity:"0"})),r(s=>({...s,min_quantity:n.min_quantity})),r(s=>({...s,enabled:n.enabled})),r(s=>({...s,observations:n.observations}))):(m(!1),r(s=>({...s,price:"0"})))}catch(c){console.log(c)}};return e.jsxs(S,{children:[e.jsx(N,{title:"Produtos"}),e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{iconNode:P,className:"w-8 h-8"}),e.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Produtos"})]}),e.jsx("div",{children:e.jsx(C,{breadcrumbs:A})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx("div",{children:e.jsx(p,{variant:"default",asChild:!0,children:e.jsxs(q,{href:route("app.products.index"),children:[e.jsx(I,{"h-4":!0,"w-4":!0}),e.jsx("span",{children:"Voltar"})]})})}),e.jsx("div",{})]}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"border rounded-lg p-2",children:e.jsxs("form",{onSubmit:v,className:"space-y-8",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"reference",children:"Referência"}),e.jsx(o,{type:"text",id:"reference",value:i.reference,onChange:t=>r("reference",t.target.value),onBlur:t=>g(t)}),a.reference&&e.jsx("div",{className:"text-red-500 text-sm",children:a.reference})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"name",children:"Nome do produto"}),e.jsx(o,{type:"text",id:"name",value:i.name,onChange:t=>r("name",t.target.value),readOnly:l}),a.name&&e.jsx("div",{className:"text-red-500 text-sm",children:a.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"description",children:"Descrição do produto"}),e.jsx(o,{type:"text",id:"description",value:i.description,onChange:t=>r("description",t.target.value),readOnly:l}),a.description&&e.jsx("div",{className:"text-red-500 text-sm",children:a.description})]})]}),e.jsxs("div",{className:"grid md:grid-cols-5 gap-4 mt-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"unity",children:"Unidade de medida"}),e.jsx(o,{type:"text",id:"unity",value:i.unity,onChange:t=>r("unity",t.target.value),onBlur:t=>t.target.value,readOnly:l}),a.unity&&e.jsx("div",{className:"text-red-500 text-sm",children:a.unity})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"measure",children:"Medida"}),e.jsx(o,{type:"number",id:"measure",value:i.measure,onChange:t=>r("measure",t.target.value),readOnly:l}),a.measure&&e.jsx("div",{className:"text-red-500 text-sm",children:a.measure})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"price",children:"Preço"}),e.jsx(o,{type:"text",id:"price",value:D(i.price),onChange:t=>r("price",t.target.value),readOnly:l}),a.price&&e.jsx("div",{className:"text-red-500 text-sm",children:a.price})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"min_quantity",children:"Quantidade mínima"}),e.jsx(o,{type:"number",id:"min_quantity",value:i.min_quantity,onChange:t=>r("min_quantity",t.target.value),readOnly:l}),a.min_quantity&&e.jsx("div",{className:"text-red-500 text-sm",children:a.min_quantity})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"quantity",children:"Quantidade"}),e.jsx(o,{type:"number",id:"quantity",value:i.quantity,onChange:t=>r("quantity",t.target.value)}),a.quantity&&e.jsx("div",{className:"text-red-500 text-sm",children:a.quantity})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"enabled",children:"Habilitar produto"}),e.jsx(O,{id:"enabled",checked:i.enabled,onCheckedChange:t=>r("enabled",t)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"observations",children:"Outros detalhes"}),e.jsx(_,{id:"observations",value:i.observations,onChange:t=>r("observations",t.target.value),readOnly:l})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(p,{type:"submit",disabled:h,children:[e.jsx(k,{}),"Salvar"]})})]})})})]})}export{ce as default};
